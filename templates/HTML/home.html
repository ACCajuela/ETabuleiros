<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Star Meeple</title>
    <link rel="stylesheet" href="CSS/padrao.css">
    <link rel="stylesheet" href="CSS/home.css">
    <link rel="shortcut icon" href="midia/icon.png" type="image/x-icon">
    <!-- Bootstrap CSS -->
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">

    <!-- jQuery (necess√°rio para o funcionamento do carrossel) -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>

    <!-- Bootstrap JS -->
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.bundle.min.js"></script>
</head>
<body>
  <header>
    <nav>
      <div>
        <img id="logoSite" src="midia/logoStarMeeple.png" alt="StarMeeple">
        <input type="text" placeholder="O que voc√™ est√° procurando?">
        <button>üîç</button>
        <button>üí¨</button>
        <img id="logoUsuario" src="avatar.png" alt="Avatar do usu√°rio">
        <span>3</span>
      </div>
      <ul>
        <li id="linkJogosCartas">Jogos de Cartas</li>
        <li id="linkJogosTabuleiro">Jogos de tabuleiro</li>
        <li id="linkQuebraCabecas">Quebra-cabe√ßas</li>
        <li id="linkFamilia">Familia</li>
        <li id="linkRPG">RPG</li>
        <li id="link18">+18</li>
      </ul>
    </nav>
  </header>
    <!-- CARROSSEL LAN√áAMENTOS -->
    <H2>Lan√ßamentos</H2>
    <div class="carrosselLancamento">
        <div id="carouselLancamentos" class="carousel slide" data-ride="carousel">
            <div class="carousel-inner">
              <div class="carousel-item active">
                <img class="d-block w-100" src="midia/catan.avif" alt="Primeiro Slide">
              </div>
              <div class="carousel-item">
                <img class="d-block w-100" src="midia/pandemic.jpg" alt="Segundo Slide">
              </div>
              <div class="carousel-item">
                <img class="d-block w-100" src="midia/uno.avif" alt="Terceiro Slide">
              </div>
              <div class="carousel-item">
                <img class="d-block w-100" src="midia/zombiecide.jfif" alt="Quarto Slide">
              </div>
              <div class="carousel-item">
                <img class="d-block w-100" src="midia/theMind.jpg" alt="Quinto Slide">
              </div>
            </div>
            <a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">
              <span class="carousel-control-prev-icon" aria-hidden="true"></span>
              <span class="sr-only">Anterior</span>
            </a>
            <a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">
              <span class="carousel-control-next-icon" aria-hidden="true"></span>
              <span class="sr-only">Pr√≥ximo</span>
            </a>
          </div>
    </div>
    <!-- CARROSSEL PROMO√á√ïES -->
    <h2>Promo√ß√µes</h2>
    <div class="carrosselPromocoes">
        <div id="carouselPromocoes" class="carousel slide" data-ride="carousel">
            <div class="carousel-inner">
              <div class="carousel-item active">
                <img class="d-block w-100" src="midia/catan.avif" alt="Primeiro Slide">
              </div>
              <div class="carousel-item">
                <img class="d-block w-100" src="midia/pandemic.jpg" alt="Segundo Slide">
              </div>
              <div class="carousel-item">
                <img class="d-block w-100" src="midia/uno.avif" alt="Terceiro Slide">
              </div>
              <div class="carousel-item">
                <img class="d-block w-100" src="midia/zombiecide.jfif" alt="Quarto Slide">
              </div>
              <div class="carousel-item">
                <img class="d-block w-100" src="midia/theMind.jpg" alt="Quinto Slide">
              </div>
            </div>
            <a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">
              <span class="carousel-control-prev-icon" aria-hidden="true"></span>
              <span class="sr-only">Anterior</span>
            </a>
            <a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">
              <span class="carousel-control-next-icon" aria-hidden="true"></span>
              <span class="sr-only">Pr√≥ximo</span>
            </a>
          </div>
    </div>
    <!-- CARROSSEL MAIS VENDIDOS -->
    <h2>Mais Vendidos</h2>
    <div class="carrosselMaisVendidos">
        <div id="carouselRecomendados" class="carousel slide" data-ride="carousel">
            <div class="carousel-inner">
              <div class="carousel-item active">
                <img class="d-block w-100" src="midia/catan.avif" alt="Primeiro Slide">
              </div>
              <div class="carousel-item">
                <img class="d-block w-100" src="midia/pandemic.jpg" alt="Segundo Slide">
              </div>
              <div class="carousel-item">
                <img class="d-block w-100" src="midia/uno.avif" alt="Terceiro Slide">
              </div>
              <div class="carousel-item">
                <img class="d-block w-100" src="midia/zombiecide.jfif" alt="Quarto Slide">
              </div>
              <div class="carousel-item">
                <img class="d-block w-100" src="midia/theMind.jpg" alt="Quinto Slide">
              </div>
            </div>
            <a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">
              <span class="carousel-control-prev-icon" aria-hidden="true"></span>
              <span class="sr-only">Anterior</span>
            </a>
            <a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">
              <span class="carousel-control-next-icon" aria-hidden="true"></span>
              <span class="sr-only">Pr√≥ximo</span>
            </a>
          </div>
    </div>
    <footer>
      <div class="formPagamento">
          <p>Formas de Pagamento</p>
          <div class="imgsPagamento">
            <img src="midia/visa.png" alt="Visa">
            <img src="mastercard.png" alt="Mastercard">
            <img src="elo.png" alt="Elo">
          </div>  
      </div>

      <div class="logoStar">
          <img src="logo.png" alt="StarMeeple logo">
          <p>StarMeeple 2025</p>
      </div>

      <div class="linkSocial">
          <p>Nos sigam nas redes sociais:</p>
          <a href="https://www.instagram.com">Instagram</a>
          <a href="https://www.facebook.com">Facebook</a>
      </div>
    </footer>

  <!-- Script para consumir API-->
  <script>
  //Recomendados
document.addEventListener("DOMContentLoaded", () => {
  fetch("http://localhost:8000/api/recomendados/")
    .then(response => {
      if (!response.ok) {
        throw new Error("Erro ao buscar recomenda√ß√µes");
      }
      return response.json();
    })
    .then(jogos => {
      const container = document.querySelector("#carouselRecomendados .carousel-inner");
      container.innerHTML = "";

      if (!Array.isArray(jogos) || jogos.length === 0) {
        container.innerHTML = `
          <div class="carousel-item active text-center p-5 bg-light">
            Nenhuma recomenda√ß√£o dispon√≠vel no momento.
          </div>
        `;
        return;
      }

      jogos.forEach((jogo, index) => {
        const ativo = index === 0 ? "active" : "";
        const imagem = jogo.imagem_url ? jogo.imagem_url : "/static/images/default-product.jpg";
        const item = `
          <div class="carousel-item ${ativo}">
            <img class="d-block w-100" src="${imagem}" alt="${jogo.nome}">
          </div>
        `;
        container.insertAdjacentHTML("beforeend", item);
      });
    })
    .catch(error => {
      console.error("Erro ao carregar recomenda√ß√µes:", error);
      document.getElementById("recomendados-container").innerHTML = `
        <div class="carousel-item active text-center p-5 bg-light">
          N√£o foi poss√≠vel carregar as recomenda√ß√µes.
        </div>
      `;
    });
});

//Lan√ßamentos
document.addEventListener("DOMContentLoaded", () => {
  fetch("http://localhost:8000/api/lancamentos/")
    .then(response => {
      if (!response.ok) {
        throw new Error("Erro ao buscar lan√ßamentos");
      }
      return response.json();
    })
    .then(jogos => {
      const container = document.querySelector("#carouselLancamentos.carousel-inner");
      container.innerHTML = "";

      if (!Array.isArray(jogos) || jogos.length === 0) {
        container.innerHTML = `
          <div class="carousel-item active text-center p-5 bg-light">
            Nenhum lan√ßamento dispon√≠vel no momento.
          </div>
        `;
        return;
      }

      jogos.forEach((jogo, index) => {
        const ativo = index === 0 ? "active" : "";
        const imagem = jogo.imagem_url ? jogo.imagem_url : "/static/images/default-product.jpg";
        const item = `
          <div class="carousel-item ${ativo}">
            <img class="d-block w-100" src="${imagem}" alt="${jogo.nome}">
          </div>
        `;
        container.insertAdjacentHTML("beforeend", item);
      });
    })
    .catch(error => {
      console.error("Erro ao carregar lan√ßamentos:", error);
      document.getElementById("lancamentos-container").innerHTML = `
        <div class="carousel-item active text-center p-5 bg-light">
          N√£o foi poss√≠vel carregar os lan√ßamentos.
        </div>
      `;
    });
});

//Promocoes
document.addEventListener("DOMContentLoaded", () => {
  fetch("http://localhost:8000/api/promocao/")
    .then(response => {
      if (!response.ok) {
        throw new Error("Erro ao buscar promo√ß√µes");
      }
      return response.json();
    })
    .then(jogos => {
      const container = document.querySelector("#carouselPromocoes .carousel-inner");
      container.innerHTML = "";

      if (!Array.isArray(jogos) || jogos.length === 0) {
        container.innerHTML = `
          <div class="carousel-item active text-center p-5 bg-light">
            Nenhuma promo√ß√£o dispon√≠vel no momento.
          </div>
        `;
        return;
      }

      jogos.forEach((jogo, index) => {
        const ativo = index === 0 ? "active" : "";
        const imagem = jogo.imagem_url ? jogo.imagem_url : "/static/images/default-product.jpg";
        const item = `
          <div class="carousel-item ${ativo}">
            <img class="d-block w-100" src="${imagem}" alt="${jogo.nome}">
          </div>
        `;
        container.insertAdjacentHTML("beforeend", item);
      });
    })
    .catch(error => {
      console.error("Erro ao carregar promo√ß√£o:", error);
      document.getElementById("promocoes-container").innerHTML = `
        <div class="carousel-item active text-center p-5 bg-light">
          N√£o foi poss√≠vel carregar as promo√ß√µes.
        </div>
      `;
    });
});
</script>
<script src="/templates/JS/padrao.js"></script>
  </body>
</html>